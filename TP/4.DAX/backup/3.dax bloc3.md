# Atelier DAX pour SSAS Tabular

# BLOC 3 : Time Intelligence Pratique

## Comprendre Time Intelligence en DAX

### Vue d'ensemble des fonctions temporelles

Avant de plonger dans les scÃ©narios, clarifions les familles de fonctions Time Intelligence :

#### ðŸ“… Famille 1 : Fonctions "TOTAL" (Cumul depuis dÃ©but de pÃ©riode)

**Pattern** : `TOTAL[PÃ‰RIODE]TD`

| Fonction     | PÃ©riode         | Exemple                             |
| ------------ | --------------- | ----------------------------------- |
| **TOTALYTD** | Year-to-Date    | Du 1er janvier Ã  aujourd'hui        |
| **TOTALQTD** | Quarter-to-Date | Du dÃ©but du trimestre Ã  aujourd'hui |
| **TOTALMTD** | Month-to-Date   | Du 1er du mois Ã  aujourd'hui        |

```dax
Sales YTD := TOTALYTD(SUM(FactInternetSales[SalesAmount]), DimDate[FullDateAlternateKey])
```

**SchÃ©ma temporel** :

```
AnnÃ©e 2013
â”œâ”€ Janvier   : YTD = Janvier uniquement
â”œâ”€ FÃ©vrier   : YTD = Jan + FÃ©v
â”œâ”€ Mars      : YTD = Jan + FÃ©v + Mars
â”œâ”€ Avril     : YTD = Jan + FÃ©v + Mars + Avril
...
â””â”€ DÃ©cembre  : YTD = Toute l'annÃ©e
```

---

#### ðŸ”™ Famille 2 : Fonctions "PREVIOUS/NEXT" (PÃ©riode prÃ©cÃ©dente/suivante)

| Fonction            | Description         | Exemple          |
| ------------------- | ------------------- | ---------------- |
| **PREVIOUSMONTH**   | Mois prÃ©cÃ©dent      | AoÃ»t â†’ Juillet   |
| **PREVIOUSQUARTER** | Trimestre prÃ©cÃ©dent | Q2 â†’ Q1          |
| **PREVIOUSYEAR**    | AnnÃ©e prÃ©cÃ©dente    | 2013 â†’ 2012      |
| **NEXTMONTH**       | Mois suivant        | AoÃ»t â†’ Septembre |

```dax
Sales Previous Month := 
    CALCULATE(
        [Total Sales],
        PREVIOUSMONTH(DimDate[FullDateAlternateKey])
    )
```

---

#### â†”ï¸ Famille 3 : Fonctions de DÃ©calage Temporel

| Fonction               | Description              | ParamÃ¨tres           |
| ---------------------- | ------------------------ | -------------------- |
| **SAMEPERIODLASTYEAR** | MÃªme pÃ©riode - 1 an      | Dates                |
| **PARALLELPERIOD**     | DÃ©calage personnalisÃ©    | Dates, Nombre, UnitÃ© |
| **DATEADD**            | Ajout/Soustraction dates | Dates, Nombre, UnitÃ© |

```dax
Sales Same Period Last Year := 
    CALCULATE(
        [Total Sales],
        SAMEPERIODLASTYEAR(DimDate[FullDateAlternateKey])
    )
```

**SchÃ©ma dÃ©calage** :

```
Si on est en Mars 2013 :
- SAMEPERIODLASTYEAR    â†’ Mars 2012
- PARALLELPERIOD(-1, YEAR) â†’ Mars 2012
- DATEADD(-12, MONTH)   â†’ Mars 2012
```

---

#### ðŸ“Š Famille 4 : Fonctions DATES* (Retournent des tables de dates)

| Fonction          | Retourne                    | Usage                 |
| ----------------- | --------------------------- | --------------------- |
| **DATESYTD**      | Toutes dates du YTD         | Filtrage manuel       |
| **DATESQTD**      | Toutes dates du QTD         | Filtrage manuel       |
| **DATESMTD**      | Toutes dates du MTD         | Filtrage manuel       |
| **DATESINPERIOD** | PÃ©riode mobile N jours/mois | Moyennes mobiles      |
| **DATESBETWEEN**  | Plage de dates              | PÃ©riode personnalisÃ©e |

```dax
Sales Last 90 Days := 
    CALCULATE(
        [Total Sales],
        DATESINPERIOD(
            DimDate[FullDateAlternateKey],
            MAX(DimDate[FullDateAlternateKey]),
            -90,
            DAY
        )
    )
```

---

### ðŸŽ¯ PrÃ©requis CRITIQUES pour Time Intelligence

**âš ï¸ Ces conditions DOIVENT Ãªtre respectÃ©es sinon les fonctions ne marchent pas !**

#### 1. Table de dates continue et complÃ¨te

```sql
-- VÃ©rifier dans DimDate
SELECT 
    MIN(FullDateAlternateKey) AS MinDate,
    MAX(FullDateAlternateKey) AS MaxDate,
    COUNT(*) AS TotalDays,
    DATEDIFF(DAY, MIN(FullDateAlternateKey), MAX(FullDateAlternateKey)) + 1 AS ExpectedDays
FROM DimDate

-- TotalDays doit Ã©galer ExpectedDays (aucun jour manquant)
```

#### 2. Colonne de date de type Date/Time

**Dans SSDT** :

1. Vue Grille â†’ DimDate
2. Clic droit sur FullDateAlternateKey â†’ **PropriÃ©tÃ©s**
3. **Type de donnÃ©es** : DOIT Ãªtre `Date` ou `DateTime`

âŒ **String ou Integer** â†’ Fonctions Time Intelligence ne marcheront PAS

#### 3. Relation active avec la table de faits

```
FactInternetSales[OrderDateKey] â”â”â”â”â–¶ DimDate[DateKey]  [ACTIVE]
```

#### 4. Marquer la table comme Table de dates

**Dans SSDT** :

1. Clic droit sur **DimDate**
2. **Marquer comme table de dates**
3. SÃ©lectionner la colonne : `FullDateAlternateKey`

**VÃ©rification** :

- L'icÃ´ne de DimDate change (ajout d'un calendrier ðŸ“…)

---

## SCÃ‰NARIO 7 : Dashboard Comparatif Temporel (YoY, MoM, QoQ)

### ðŸ“‹ Contexte MÃ©tier

**Persona** : Laurent, Directeur GÃ©nÃ©ral  
**Besoin** : "Je veux un dashboard exÃ©cutif qui me montre EN UN COUP D'Å’IL :

- Les ventes du mois en cours
- La comparaison avec le mois dernier (MoM = Month-over-Month)
- La comparaison avec l'annÃ©e derniÃ¨re (YoY = Year-over-Year)
- Les indicateurs de croissance
- Des alertes visuelles (rouge si baisse, vert si hausse)"

**Objectif pÃ©dagogique** :

- CrÃ©er des mesures de comparaison temporelle
- Calculer des taux de croissance
- Utiliser des indicateurs visuels conditionnels
- Construire un dashboard exÃ©cutif complet

---

### Ã‰tape 1 : Mesures de base (pÃ©riode actuelle)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 1.1 Ventes du mois en cours (MTD)

```dax
Sales MTD := 
    TOTALMTD(
        SUM(FactInternetSales[SalesAmount]),
        DimDate[FullDateAlternateKey]
    )
```

**Ce que fait TOTALMTD** :

```
Si on est le 15 mars 2013 :
â”œâ”€ Prend toutes les dates du 1er au 15 mars
â””â”€ Calcule la somme des ventes pour ces dates
```

#### 1.2 Ventes du trimestre en cours (QTD)

```dax
Sales QTD := 
    TOTALQTD(
        SUM(FactInternetSales[SalesAmount]),
        DimDate[FullDateAlternateKey]
    )
```

#### 1.3 Ventes de l'annÃ©e en cours (YTD)

```dax
Sales YTD := 
    TOTALYTD(
        SUM(FactInternetSales[SalesAmount]),
        DimDate[FullDateAlternateKey]
    )
```

#### 1.4 Tester dans Excel

**Configuration TCD** :

- **Lignes** : DimDate[MonthName]
- **Filtrer** : CalendarYear = 2013
- **Valeurs** : Sales MTD, Sales QTD, Sales YTD

**RÃ©sultat** :

```
Month    | MTD          | QTD          | YTD
Jan      | $802,145     | $802,145     | $802,145
Feb      | $765,234     | $1,567,379   | $1,567,379
Mar      | $812,456     | $2,379,835   | $2,379,835
Apr      | $789,123     | $789,123     | $3,168,958
Mai      | $823,567     | $1,612,690   | $3,992,525
Jun      | $845,234     | $2,457,924   | $4,837,759
...
```

**ðŸ’¡ Observation** :

- **MTD** : RÃ©initialisÃ© chaque mois
- **QTD** : CumulÃ© dans le trimestre, rÃ©initialisÃ© chaque trimestre (T1=Jan-Mars, T2=Avr-Juin)
- **YTD** : CumulÃ© toute l'annÃ©e

---

### Ã‰tape 2 : Mesures de comparaison (pÃ©riodes prÃ©cÃ©dentes)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 2.1 Ventes du mois prÃ©cÃ©dent

```dax
Sales Previous Month := 
    CALCULATE(
        [Total Sales],
        PREVIOUSMONTH(DimDate[FullDateAlternateKey])
    )
```

**Fonctionnement** :

```
Si on est en Mars 2013 :
â”œâ”€ PREVIOUSMONTH dÃ©cale d'un mois â†’ FÃ©vrier 2013
â””â”€ Calcule Total Sales pour fÃ©vrier
```

#### 2.2 Ventes du mÃªme mois l'annÃ©e derniÃ¨re

```dax
Sales Same Month Last Year := 
    CALCULATE(
        [Total Sales],
        SAMEPERIODLASTYEAR(DimDate[FullDateAlternateKey])
    )
```

**Fonctionnement** :

```
Si on est en Mars 2013 :
â”œâ”€ SAMEPERIODLASTYEAR dÃ©cale d'un an â†’ Mars 2012
â””â”€ Calcule Total Sales pour mars 2012
```

#### 2.3 Tester les comparaisons

```
Month      | Current      | Prev Month   | Same Month LY
Jan 2013   | $802,145     | $845,678     | $789,234
Feb 2013   | $765,234     | $802,145     | $756,890
Mar 2013   | $812,456     | $765,234     | $801,234
Apr 2013   | $789,123     | $812,456     | $776,543
...
```

---

### Ã‰tape 3 : Calculer les variations (absolues et pourcentages)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 3.1 Variation MoM (Month-over-Month) absolue

```dax
MoM Variance := 
    [Total Sales] - [Sales Previous Month]
```

#### 3.2 Variation MoM en pourcentage

```dax
MoM Variance % := 
    DIVIDE(
        [MoM Variance],
        [Sales Previous Month]
    ) * 100
```

#### 3.3 Variation YoY (Year-over-Year) absolue

```dax
YoY Variance := 
    [Total Sales] - [Sales Same Month Last Year]
```

#### 3.4 Variation YoY en pourcentage

```dax
YoY Variance % := 
    DIVIDE(
        [YoY Variance],
        [Sales Same Month Last Year]
    ) * 100
```

#### 3.5 RÃ©sultat avec variations

```
Month      | Current    | Prev M   | MoM Var  | MoM %   | Same M LY | YoY Var  | YoY %
Jan 2013   | $802,145   | $845,678 | -$43,533 | -5.15%  | $789,234  | +$12,911 | +1.64%
Feb 2013   | $765,234   | $802,145 | -$36,911 | -4.60%  | $756,890  | +$8,344  | +1.10%
Mar 2013   | $812,456   | $765,234 | +$47,222 | +6.17%  | $801,234  | +$11,222 | +1.40%
Apr 2013   | $789,123   | $812,456 | -$23,333 | -2.87%  | $776,543  | +$12,580 | +1.62%
```

**ðŸ’¡ Insights** :

- **Janvier** : Baisse de 5% vs dÃ©cembre (normal aprÃ¨s fÃªtes), mais +1.6% vs an dernier
- **Mars** : Rebond de 6% vs fÃ©vrier (sortie de l'hiver ?)
- **Tendance YoY** : Croissance constante ~1.5% vs annÃ©e derniÃ¨re âœ…

---

### Ã‰tape 4 : Indicateurs visuels (Up/Down Arrows)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 4.1 Indicateur MoM (flÃ¨ches)

```dax
MoM Trend Indicator := 
    VAR Variance = [MoM Variance %]
    RETURN
        SWITCH(
            TRUE(),
            Variance > 5, "â†‘â†‘ Strong Growth",
            Variance > 0, "â†‘ Growth",
            Variance > -5, "â†“ Slight Decline",
            "â†“â†“ Strong Decline"
        )
```

#### 4.2 Indicateur YoY

```dax
YoY Trend Indicator := 
    VAR Variance = [YoY Variance %]
    RETURN
        SWITCH(
            TRUE(),
            Variance > 10, "ðŸ”¥ Excellent",
            Variance > 5, "âœ… Very Good",
            Variance > 0, "ðŸ“ˆ Positive",
            Variance > -5, "âš ï¸ Warning",
            "ðŸš¨ Alert"
        )
```

#### 4.3 Code couleur (pour formatage conditionnel)

```dax
MoM Color Code := 
    VAR Variance = [MoM Variance %]
    RETURN
        SWITCH(
            TRUE(),
            Variance > 5, "Green",
            Variance > 0, "LightGreen",
            Variance > -5, "Orange",
            "Red"
        )
```

**Usage dans Excel** :

1. Ajouter la mesure `MoM Color Code` (masquÃ©e)
2. Mise en forme conditionnelle basÃ©e sur cette mesure
3. Cellule verte si croissance, rouge si baisse

---

### Ã‰tape 5 : Dashboard ExÃ©cutif pour Laurent

#### 5.1 Section 1 - KPI Cards (en haut)

**Carte 1 : Ventes MTD**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VENTES DU MOIS (MTD)        â”‚
â”‚ $812,456                    â”‚
â”‚ â†‘ +6.17% vs mois prÃ©cÃ©dent  â”‚
â”‚ â†‘ +1.40% vs annÃ©e derniÃ¨re  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mesure pour la carte** :

```dax
MTD Card Text := 
    VAR CurrentMTD = [Sales MTD]
    VAR MoMPct = [MoM Variance %]
    VAR YoYPct = [YoY Variance %]
    RETURN
        "MTD: " & FORMAT(CurrentMTD, "$#,##0") & " | " &
        "MoM: " & FORMAT(MoMPct, "+0.00%;-0.00%") & " | " &
        "YoY: " & FORMAT(YoYPct, "+0.00%;-0.00%")
```

**Carte 2 : Ventes QTD**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VENTES DU TRIMESTRE (QTD)   â”‚
â”‚ $2,379,835                  â”‚
â”‚ Objectif Q1: $2,500,000     â”‚
â”‚ 95.2% atteint âš ï¸            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Carte 3 : Ventes YTD**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VENTES DE L'ANNÃ‰E (YTD)     â”‚
â”‚ $9,791,060                  â”‚
â”‚ vs $9,652,340 (annÃ©e -1)    â”‚
â”‚ +1.44% ðŸ“ˆ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2 Section 2 - Graphique de tendance

**Graphique en colonnes avec ligne de tendance** :

- **Colonnes** : Ventes mensuelles 2013
- **Ligne** : Ventes mensuelles 2012 (comparaison)
- **Couleur conditionnelle** : Vert si > 2012, Rouge si < 2012

#### 5.3 Section 3 - Tableau dÃ©taillÃ©

```
Month | Current   | Prev M    | MoM %  | Same M LY | YoY %  | Trend
Jan   | $802,145  | $845,678  | -5.15% | $789,234  | +1.64% | â†“ â†‘
Feb   | $765,234  | $802,145  | -4.60% | $756,890  | +1.10% | â†“ â†‘
Mar   | $812,456  | $765,234  | +6.17% | $801,234  | +1.40% | â†‘ â†‘
Apr   | $789,123  | $812,456  | -2.87% | $776,543  | +1.62% | â†“ â†‘
...
```

**Formatage conditionnel** :

- MoM % : ðŸŸ¢ si > 0, ðŸ”´ si < 0
- YoY % : ðŸŸ¢ si > 0, ðŸ”´ si < 0

---

### Ã‰tape 6 : Alertes automatiques

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 6.1 DÃ©tecter les baisses significatives

```dax
Alert MoM Decline := 
    IF(
        [MoM Variance %] < -10,
        "âš ï¸ ALERTE : Baisse > 10% vs mois prÃ©cÃ©dent",
        BLANK()
    )
```

#### 6.2 DÃ©tecter performance exceptionnelle

```dax
Alert Exceptional Performance := 
    IF(
        [YoY Variance %] > 15,
        "ðŸ† Performance exceptionnelle : Croissance > 15% YoY",
        BLANK()
    )
```

#### 6.3 Affichage dans Excel

**CrÃ©er une table sÃ©parÃ©e** :

```
Month | Alert
Mar   | (vide)
Apr   | âš ï¸ ALERTE : Baisse > 10% vs mois prÃ©cÃ©dent
Mai   | (vide)
...
Dec   | ðŸ† Performance exceptionnelle : Croissance > 15% YoY
```

**Filtrer** : Afficher uniquement les lignes avec alertes (â‰  BLANK)

---

### Ã‰tape 7 : Comparaison QoQ (Quarter-over-Quarter)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 7.1 Ventes du trimestre prÃ©cÃ©dent

```dax
Sales Previous Quarter := 
    CALCULATE(
        [Total Sales],
        PREVIOUSQUARTER(DimDate[FullDateAlternateKey])
    )
```

#### 7.2 Variation QoQ

```dax
QoQ Variance % := 
    DIVIDE(
        [Total Sales] - [Sales Previous Quarter],
        [Sales Previous Quarter]
    ) * 100
```

#### 7.3 RÃ©sultat par trimestre

```
Quarter  | Sales QTD   | Prev Quarter | QoQ Variance %
Q1 2013  | $2,379,835  | $2,456,890   | -3.14%
Q2 2013  | $2,457,924  | $2,379,835   | +3.28%
Q3 2013  | $2,567,123  | $2,457,924   | +4.45%
Q4 2013  | $2,386,178  | $2,567,123   | -7.05%  âš ï¸
```

**ðŸ’¡ Insight** : Q4 en baisse (normal ? saisonnalitÃ© ?)

---

### ðŸ“Š CONCLUSION DU SCÃ‰NARIO 7

#### Ce que vous avez appris :

âœ… **TOTALMTD, TOTALQTD, TOTALYTD** : Cumuls depuis dÃ©but de pÃ©riode  
âœ… **PREVIOUSMONTH, PREVIOUSQUARTER** : PÃ©riodes prÃ©cÃ©dentes  
âœ… **SAMEPERIODLASTYEAR** : Comparaison YoY  
âœ… **Variations absolues et %** : Calcul de croissance  
âœ… **Indicateurs visuels** : FlÃ¨ches, couleurs, alertes  
âœ… **Dashboard exÃ©cutif** : Vue Ã  360Â° pour dirigeants  
âœ… **Alertes automatiques** : DÃ©tecter anomalies

#### Pattern Dashboard Temporel

```
1. CrÃ©er mesures de base (MTD, QTD, YTD)
2. CrÃ©er mesures de comparaison (Previous, Same Period LY)
3. Calculer variations (absolues et %)
4. Ajouter indicateurs visuels (trend, color, alerts)
5. Construire dashboard avec sections :
   - KPI Cards (haut)
   - Graphiques de tendance (milieu)
   - Tableau dÃ©taillÃ© (bas)
```

#### Prochaine Ã©tape :

â†’ ScÃ©nario 8 : Analyses de tendances avec YTD comparatif et objectifs

---

## SCÃ‰NARIO 8 : Analyse de Tendances et Objectifs (YTD Comparatif)

### ðŸ“‹ Contexte MÃ©tier

**Persona** : Ã‰milie, Directrice des Ventes  
**Besoin** : "Je veux comparer notre progression YTD avec l'annÃ©e derniÃ¨re pour savoir si on est sur la bonne trajectoire. J'ai aussi des objectifs annuels et je veux voir oÃ¹ on en est."

**Objectifs** :

- Ventes YTD 2013 : 12M$
- Croissance YoY : minimum +5%
- Marge brute : maintenir > 48%

**Objectif pÃ©dagogique** :

- CrÃ©er des mesures YTD comparatives
- Visualiser la progression vs objectifs
- Analyser les Ã©carts et tendances
- PrÃ©voir l'atteinte des objectifs

---

### Ã‰tape 1 : YTD de l'annÃ©e en cours vs annÃ©e prÃ©cÃ©dente

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 1.1 YTD annÃ©e en cours (dÃ©jÃ  crÃ©Ã©)

```dax
Sales YTD := 
    TOTALYTD(
        SUM(FactInternetSales[SalesAmount]),
        DimDate[FullDateAlternateKey]
    )
```

#### 1.2 YTD annÃ©e prÃ©cÃ©dente (mÃªme pÃ©riode)

```dax
Sales YTD LY := 
    CALCULATE(
        [Sales YTD],
        SAMEPERIODLASTYEAR(DimDate[FullDateAlternateKey])
    )
```

**Comment Ã§a marche ?**

```
Si on est le 15 mars 2013 :
â”œâ”€ Sales YTD = 1er jan au 15 mars 2013
â”œâ”€ SAMEPERIODLASTYEAR dÃ©cale â†’ 1er jan au 15 mars 2012
â””â”€ Calcule Sales YTD pour cette pÃ©riode 2012
```

#### 1.3 Variation YTD YoY

```dax
YTD YoY Variance := 
    [Sales YTD] - [Sales YTD LY]

YTD YoY Variance % := 
    DIVIDE(
        [YTD YoY Variance],
        [Sales YTD LY]
    ) * 100
```

#### 1.4 Tester dans Excel

**Filtrer sur Mars 2013** :

```
Measure             | Value
Sales YTD           | $2,379,835     (Jan-Mars 2013)
Sales YTD LY        | $2,347,358     (Jan-Mars 2012)
YTD YoY Variance    | +$32,477
YTD YoY Variance %  | +1.38%
```

**Graphique YTD comparatif** :

```
  $3.0M â”‚                                    
        â”‚                        â”Œâ”€ 2013     
        â”‚                   â”Œâ”€â”€â”€â”€â”¤           
  $2.0M â”‚              â”Œâ”€â”€â”€â”€â”¤    â””â”€ 2012    
        â”‚         â”Œâ”€â”€â”€â”€â”¤                     
  $1.0M â”‚    â”Œâ”€â”€â”€â”€â”¤                          
        â”‚â”€â”€â”€â”€â”¤                                
        â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€       
           Jan  Feb  Mar  Apr  Mai  Jun      
```

**ðŸ’¡ Observation** : Croissance constante mais modeste (+1.38%)

---

### Ã‰tape 2 : Comparer avec l'objectif annuel

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 2.1 DÃ©finir l'objectif (statique pour commencer)

```dax
Sales Target Annual := 12000000  // 12M$
```

#### 2.2 Objectif YTD (proportionnel)

**MÃ©thode** : Calculer l'objectif proportionnel au nombre de jours Ã©coulÃ©s

```dax
Sales Target YTD := 
    VAR DaysInYear = 365
    VAR DaysElapsed = 
        COUNTROWS(
            FILTER(
                ALL(DimDate),
                DimDate[FullDateAlternateKey] <= MAX(DimDate[FullDateAlternateKey]) &&
                DimDate[CalendarYear] = YEAR(MAX(DimDate[FullDateAlternateKey]))
            )
        )
    VAR ProportionOfYear = DIVIDE(DaysElapsed, DaysInYear)
    RETURN
        [Sales Target Annual] * ProportionOfYear
```

**Explication** :

```
Si on est le 31 mars (90Ã¨me jour de l'annÃ©e) :
â”œâ”€ Proportion = 90 / 365 = 24.66%
â”œâ”€ Objectif YTD = 12M$ Ã— 24.66%
â””â”€ Objectif YTD = 2,959,179$
```

#### 2.3 Ã‰cart vs objectif

```dax
Variance vs Target := 
    [Sales YTD] - [Sales Target YTD]

Variance vs Target % := 
    DIVIDE(
        [Variance vs Target],
        [Sales Target YTD]
    ) * 100
```

#### 2.4 RÃ©sultat au 31 mars

```
Measure                 | Value
Sales YTD (actual)      | $2,379,835
Sales Target YTD        | $2,959,179
Variance vs Target      | -$579,344
Variance vs Target %    | -19.57%  âš ï¸
```

**ðŸš¨ ALERTE** : On est 19.57% en dessous de l'objectif !

---

### Ã‰tape 3 : Projection de fin d'annÃ©e

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 3.1 Calculer la tendance actuelle

```dax
Sales Daily Average YTD := 
    VAR DaysElapsed = 
        COUNTROWS(
            FILTER(
                ALL(DimDate),
                DimDate[FullDateAlternateKey] <= MAX(DimDate[FullDateAlternateKey]) &&
                DimDate[CalendarYear] = YEAR(MAX(DimDate[FullDateAlternateKey]))
            )
        )
    RETURN
        DIVIDE([Sales YTD], DaysElapsed)
```

#### 3.2 Projeter sur l'annÃ©e complÃ¨te

```dax
Sales Projected Annual := 
    [Sales Daily Average YTD] * 365
```

**RÃ©sultat au 31 mars** :

```
Sales YTD               | $2,379,835
Days Elapsed            | 90
Daily Average           | $26,442.61
Projected Annual        | $9,651,553  â† Projection
Target Annual           | $12,000,000
Gap                     | -$2,348,447  ðŸš¨
```

**ðŸ’¡ Conclusion pour Ã‰milie** :
Si la tendance continue, on finira l'annÃ©e Ã  9.6M$ au lieu de 12M$.  
**Action requise** : AccÃ©lÃ©rer les ventes de 24% !

---

### Ã‰tape 4 : Analyse de la trajectoire (Run Rate)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 4.1 Calculer le "run rate" mensuel requis

```dax
Monthly Run Rate Required := 
    VAR RemainingTarget = [Sales Target Annual] - [Sales YTD]
    VAR MonthsRemaining = 
        DIVIDE(
            365 - COUNTROWS(
                FILTER(
                    ALL(DimDate),
                    DimDate[FullDateAlternateKey] <= MAX(DimDate[FullDateAlternateKey]) &&
                    DimDate[CalendarYear] = YEAR(MAX(DimDate[FullDateAlternateKey]))
                )
            ),
            30.42  // Moyenne de jours par mois
        )
    RETURN
        DIVIDE(RemainingTarget, MonthsRemaining)
```

#### 4.2 Comparer avec la performance actuelle

```dax
Monthly Average Current := 
    VAR MonthsElapsed = MONTH(MAX(DimDate[FullDateAlternateKey]))
    RETURN
        DIVIDE([Sales YTD], MonthsElapsed)
```

**RÃ©sultat** :

```
Monthly Average (Jan-Mar)  | $793,278
Monthly Run Rate Required  | $1,068,952
Increase Needed            | +34.7%  ðŸš¨
```

**ðŸ’¡ Message pour Ã‰milie** :
"Pour atteindre l'objectif, il faut augmenter les ventes mensuelles de 35% !"

---

### Ã‰tape 5 : Indicateur de performance (RAG Status)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 5.1 CrÃ©er un statut RAG (Red/Amber/Green)

```dax
Performance RAG Status := 
    VAR VariancePct = [Variance vs Target %]
    RETURN
        SWITCH(
            TRUE(),
            VariancePct >= 0, "ðŸŸ¢ Green - On Track",
            VariancePct >= -10, "ðŸŸ¡ Amber - Needs Attention",
            "ðŸ”´ Red - Critical"
        )
```

#### 5.2 Statut par dimension

**Par catÃ©gorie de produit** :

```
Category    | YTD        | Target YTD | Variance % | RAG Status
Bikes       | $2,200,000 | $2,750,000 | -20.0%     | ðŸ”´ Red
Clothing    | $95,000    | $125,000   | -24.0%     | ðŸ”´ Red
Accessories | $84,835    | $84,179    | +0.8%      | ðŸŸ¢ Green
```

**ðŸ’¡ Insight** : Seuls les accessoires sont sur la bonne voie !

---

### Ã‰tape 6 : Tableau de bord de progression

#### 6.1 Graphique "Waterfall" (cascade)

**Visualiser la progression vers l'objectif** :

```
$12.0M â”‚ Target â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• âœ“
       â”‚                        â”Œâ”€â”€â”€â”€â”€â”
$10.0M â”‚                        â”‚Resteâ”‚
       â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”¤ 9.6Mâ”‚
 $8.0M â”‚                 â”‚Proj. â”‚     â”‚
       â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”¤ Act. â”‚     â”‚
 $6.0M â”‚          â”‚Q1-Q3 â”‚      â”‚     â”‚
       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”¤      â”‚      â”‚     â”‚
 $4.0M â”‚   â”‚ YTD  â”‚      â”‚      â”‚     â”‚
       â”‚â”€â”€â”€â”¤ 2.4M â”‚      â”‚      â”‚     â”‚
       â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
         Start  Q1    Q2    Q3    Q4
```

#### 6.2 Jauge de progression

**Mesure pour jauge** :

```dax
Target Achievement % := 
    DIVIDE([Sales YTD], [Sales Target YTD]) * 100
```

**RÃ©sultat** : 80.4% de l'objectif YTD (devrait Ãªtre Ã  100%)

---

### Ã‰tape 7 : Comparaison multi-annÃ©es (3 ans)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 7.1 YTD il y a 2 ans

```dax
Sales YTD 2Y Ago := 
    CALCULATE(
        [Sales YTD],
        DATEADD(DimDate[FullDateAlternateKey], -2, YEAR)
    )
```

#### 7.2 Tableau de comparaison

```
Month | YTD 2011   | YTD 2012   | YTD 2013   | Trend
Jan   | $789,234   | $789,234   | $802,145   | ðŸ“ˆ
Feb   | $1,546,124 | $1,546,124 | $1,567,379 | ðŸ“ˆ
Mar   | $2,347,358 | $2,347,358 | $2,379,835 | ðŸ“ˆ
Apr   | $3,123,901 | $3,123,901 | $3,168,958 | ðŸ“ˆ
...
```

**Graphique multi-lignes** :

```
  $10M â”‚                              â”Œâ”€ 2013
       â”‚                         â”Œâ”€â”€â”€â”€â”¤
       â”‚                    â”Œâ”€â”€â”€â”€â”¤    â”œâ”€ 2012
   $5M â”‚               â”Œâ”€â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”¤
       â”‚          â”Œâ”€â”€â”€â”€â”¤              â””â”€ 2011
       â”‚     â”Œâ”€â”€â”€â”€â”¤
       â”‚â”€â”€â”€â”€â”€â”¤
       â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´
          Jan  Mar  Mai  Jul  Sep  Nov
```

**ðŸ’¡ Observation** : Croissance rÃ©guliÃ¨re mais pas explosive

---

### ðŸ“Š CONCLUSION DU SCÃ‰NARIO 8

#### Ce que vous avez appris :

âœ… **YTD comparatif** : Comparer YTD actuel vs annÃ©e(s) prÃ©cÃ©dente(s)  
âœ… **Objectifs proportionnels** : Calculer objectif YTD basÃ© sur jours Ã©coulÃ©s  
âœ… **Projections** : Estimer performance fin d'annÃ©e  
âœ… **Run Rate** : Calculer le rythme requis pour atteindre objectifs  
âœ… **RAG Status** : Indicateurs Red/Amber/Green  
âœ… **Multi-annÃ©es** : Analyser tendances sur plusieurs annÃ©es

#### Pattern Analyse vs Objectifs

```
1. DÃ©finir objectif annuel
2. Calculer objectif YTD proportionnel
3. Comparer performance rÃ©elle vs objectif
4. Projeter fin d'annÃ©e (tendance actuelle)
5. Calculer run rate requis
6. CrÃ©er indicateurs RAG
7. Identifier actions correctives
```

#### Messages pour Ã‰milie

ðŸ”´ **Situation actuelle** : -19.57% vs objectif YTD  
ðŸ“Š **Projection** : Si tendance continue â†’ 9.6M$ au lieu de 12M$  
ðŸŽ¯ **Action requise** : Augmenter ventes mensuelles de +35%  
âœ… **Point positif** : Croissance YoY constante (+1.38%)  
âš ï¸ **Focus** : Bikes et Clothing sous-performent, Accessories OK

#### Prochaine Ã©tape :

â†’ ScÃ©nario 9 : PÃ©riodes mobiles et moyennes mobiles (Moving Average)

---

## SCÃ‰NARIO 9 : PÃ©riodes Mobiles et Moyennes Mobiles (Rolling Metrics)

### ðŸ“‹ Contexte MÃ©tier

**Persona** : David, Analyste Commercial  
**Besoin** : "Les ventes fluctuent beaucoup d'un mois Ã  l'autre. Je veux lisser ces variations avec des moyennes mobiles pour voir la vraie tendance."

**ProblÃ¨mes** :

- SaisonnalitÃ© mensuelle masque la tendance
- Pics en dÃ©cembre, creux en fÃ©vrier
- Besoin de voir la tendance lissÃ©e sur 3 mois, 6 mois, 12 mois

**Objectif pÃ©dagogique** :

- CrÃ©er des pÃ©riodes mobiles (rolling periods)
- Calculer des moyennes mobiles (moving averages)
- Utiliser DATESINPERIOD
- Analyser tendances lissÃ©es

---

### Ã‰tape 1 : Comprendre DATESINPERIOD

**ðŸŽ¯ Fonction : DATESINPERIOD(dates, start_date, number, interval)**

#### 1.1 Syntaxe

```dax
DATESINPERIOD(
    DimDate[FullDateAlternateKey],    -- Colonne de dates
    MAX(DimDate[FullDateAlternateKey]), -- Date de rÃ©fÃ©rence
    -90,                               -- Nombre (nÃ©gatif = passÃ©)
    DAY                                -- UnitÃ© (DAY, MONTH, QUARTER, YEAR)
)
```

#### 1.2 SchÃ©ma fonctionnement

```
Si on est le 31 mars 2013 et on demande -90 jours :

â”‚ â—„â”€â”€â”€â”€â”€â”€ 90 jours â”€â”€â”€â”€â”€â”€â”¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
01 Jan                  31 Mars
                        â†‘ (aujourd'hui)

Retourne : Toutes les dates du 01/01 au 31/03
```

---

### Ã‰tape 2 : Ventes des 90 derniers jours (rolling 3 months)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 2.1 Formule

```dax
Sales Last 90 Days := 
    CALCULATE(
        SUM(FactInternetSales[SalesAmount]),
        DATESINPERIOD(
            DimDate[FullDateAlternateKey],
            MAX(DimDate[FullDateAlternateKey]),
            -90,
            DAY
        )
    )
```

#### 2.2 Tester dans Excel

**Par mois** :

```
Month      | Sales (month) | Sales Last 90 Days
Jan 2013   | $802,145      | $2,456,789  (Oct-Nov-Dec-Jan)
Feb 2013   | $765,234      | $2,378,901  (Nov-Dec-Jan-Feb)
Mar 2013   | $812,456      | $2,379,835  (Dec-Jan-Feb-Mar)
Apr 2013   | $789,123      | $2,366,813  (Jan-Feb-Mar-Apr)
```

**ðŸ’¡ Observation** : La fenÃªtre glisse de 90 jours Ã  chaque fois !

---

### Ã‰tape 3 : Moyenne mobile sur 3 mois

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 3.1 Formule simple (fenÃªtre de 3 mois)

```dax
Sales Moving Avg 3M := 
    VAR Last3Months = 
        DATESINPERIOD(
            DimDate[FullDateAlternateKey],
            MAX(DimDate[FullDateAlternateKey]),
            -3,
            MONTH
        )
    VAR TotalSales = 
        CALCULATE(
            SUM(FactInternetSales[SalesAmount]),
            Last3Months
        )
    VAR MonthCount = 3
    RETURN
        DIVIDE(TotalSales, MonthCount)
```

#### 3.2 RÃ©sultat

```
Month      | Sales      | Moving Avg 3M | Ã‰cart vs Avg
Jan 2013   | $802,145   | $818,789      | -$16,644
Feb 2013   | $765,234   | $793,278      | -$28,044
Mar 2013   | $812,456   | $793,278      | +$19,178
Apr 2013   | $789,123   | $788,938      | +$185
Mai 2013   | $823,567   | $808,382      | +$15,185
```

**ðŸ’¡ Insight** : FÃ©vrier est en dessous de la moyenne, mais Mars rebondit !

---

### Ã‰tape 4 : Graphique de tendance lissÃ©e

#### 4.1 PrÃ©parer les mesures

```dax
-- Ventes mensuelles (brutes)
Sales Monthly := SUM(FactInternetSales[SalesAmount])

-- Moyenne mobile 3 mois
Sales MA 3M := [Sales Moving Avg 3M]

-- Moyenne mobile 6 mois
Sales MA 6M := 
    VAR Last6Months = DATESINPERIOD(DimDate[FullDateAlternateKey], MAX(DimDate[FullDateAlternateKey]), -6, MONTH)
    VAR TotalSales = CALCULATE(SUM(FactInternetSales[SalesAmount]), Last6Months)
    RETURN DIVIDE(TotalSales, 6)

-- Moyenne mobile 12 mois
Sales MA 12M := 
    VAR Last12Months = DATESINPERIOD(DimDate[FullDateAlternateKey], MAX(DimDate[FullDateAlternateKey]), -12, MONTH)
    VAR TotalSales = CALCULATE(SUM(FactInternetSales[SalesAmount]), Last12Months)
    RETURN DIVIDE(TotalSales, 12)
```

#### 4.2 Graphique dans Excel

**Type** : Graphique en courbes

```
$900K â”‚
      â”‚  â•±â•²    â•±â•²     â•±â•²           â† Sales Monthly (volatile)
$800K â”‚ â•±  â•²  â•±  â•²   â•±  â•²
      â”‚â•±    â•²â•±    â•² â•±    â•²
$700K â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â† MA 3M (lissÃ©e)
      â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â† MA 12M (trÃ¨s lissÃ©e)
      â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€
         Jan  Apr  Jul  Oct
```

**ðŸ’¡ Observation** :

- **Ligne bleue** (monthly) : Volatil, pics et creux
- **Ligne verte** (MA 3M) : Tendance intermÃ©diaire
- **Ligne rouge** (MA 12M) : Tendance gÃ©nÃ©rale trÃ¨s lissÃ©e

---

### Ã‰tape 5 : DÃ©tection de tendances (hausse/baisse)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 5.1 Comparer moyenne mobile actuelle vs prÃ©cÃ©dente

```dax
MA 3M Previous Month := 
    CALCULATE(
        [Sales MA 3M],
        DATEADD(DimDate[FullDateAlternateKey], -1, MONTH)
    )

MA 3M Trend := 
    VAR Current = [Sales MA 3M]
    VAR Previous = [MA 3M Previous Month]
    VAR Change = DIVIDE(Current - Previous, Previous) * 100
    RETURN
        SWITCH(
            TRUE(),
            Change > 2, "ðŸ“ˆ Tendance haussiÃ¨re forte",
            Change > 0, "â†—ï¸ LÃ©gÃ¨re hausse",
            Change > -2, "â†˜ï¸ LÃ©gÃ¨re baisse",
            "ðŸ“‰ Tendance baissiÃ¨re forte"
        )
```

#### 5.2 RÃ©sultat

```
Month      | MA 3M      | MA 3M Prev | Trend
Jan 2013   | $818,789   | $825,670   | â†˜ï¸ LÃ©gÃ¨re baisse
Feb 2013   | $793,278   | $818,789   | ðŸ“‰ Tendance baissiÃ¨re
Mar 2013   | $793,278   | $793,278   | â†’ Stable
Apr 2013   | $788,938   | $793,278   | â†˜ï¸ LÃ©gÃ¨re baisse
Mai 2013   | $808,382   | $788,938   | â†—ï¸ LÃ©gÃ¨re hausse
```

**ðŸ’¡ Pour David** : AprÃ¨s une baisse Jan-Avr, la tendance repart Ã  la hausse en Mai !

---

### Ã‰tape 6 : Moyenne mobile pondÃ©rÃ©e (Weighted Moving Average)

**ðŸŽ¯ Type d'objet : ðŸ“Š MESURE**

#### 6.1 Donner plus de poids aux mois rÃ©cents

```dax
Sales WMA 3M := 
    VAR CurrentMonth = 
        CALCULATE(
            SUM(FactInternetSales[SalesAmount]),
            DATESMTD(DimDate[FullDateAlternateKey])
        )
    VAR PreviousMonth = 
        CALCULATE(
            SUM(FactInternetSales[SalesAmount]),
            PREVIOUSMONTH(DimDate[FullDateAlternateKey])
        )
    VAR TwoMonthsAgo = 
        CALCULATE(
            SUM(FactInternetSales[SalesAmount]),
            DATEADD(DimDate[FullDateAlternateKey], -2, MONTH)
        )
    RETURN
        -- PondÃ©ration : 3x le mois actuel, 2x le mois prÃ©cÃ©dent, 1x il y a 2 mois
        DIVIDE(
            (CurrentMonth * 3) + (PreviousMonth * 2) + (TwoMonthsAgo * 1),
            6  -- Somme des poids (3+2+1)
        )
```

#### 6.2 Comparaison

```
Month    | Sales     | MA 3M (simple) | WMA 3M (pondÃ©rÃ©e)
Mar 2013 | $812,456  | $793,278       | $801,234
Apr 2013 | $789,123  | $788,938       | $793,456
Mai 2013 | $823,567  | $808,382       | $816,789
```

**ðŸ’¡ DiffÃ©rence** : WMA rÃ©agit plus vite aux changements rÃ©cents !

---

### Ã‰tape 7 : Dashboard de David - Analyse de tendances

#### 7.1 Section 1 - Vue d'ensemble

**KPI Cards** :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ventes du mois      â”‚ â”‚ Moyenne mobile 3M   â”‚ â”‚ Tendance             â”‚
â”‚ $823,567            â”‚ â”‚ $808,382            â”‚ â”‚ â†—ï¸ LÃ©gÃ¨re hausse     â”‚
â”‚ +4.4% vs mois prÃ©c. â”‚ â”‚ +2.5% vs pÃ©riode    â”‚ â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.2 Section 2 - Graphique multi-lignes

**3 lignes superposÃ©es** :

1. Ventes mensuelles (bleu, volatile)
2. MA 3M (vert, lissÃ©e)
3. MA 12M (rouge, trÃ¨s lissÃ©e)

**InterprÃ©tation** :

- Si ligne bleue > ligne verte â†’ Performance au-dessus de la tendance court terme
- Si ligne verte > ligne rouge â†’ Tendance court terme meilleure que long terme
- Si ligne verte â†—ï¸ â†’ Tendance positive

#### 7.3 Section 3 - DÃ©tection d'anomalies

```dax
Sales Anomaly Detection := 
    VAR CurrentSales = [Sales Monthly]
    VAR MA = [Sales MA 3M]
    VAR StdDev = 
        STDEV.S(
            CALCULATETABLE(
                VALUES(FactInternetSales[SalesAmount]),
                DATESINPERIOD(DimDate[FullDateAlternateKey], MAX(DimDate[FullDateAlternateKey]), -3, MONTH)
            )
        )
    VAR ZScore = DIVIDE(CurrentSales - MA, StdDev)
    RETURN
        SWITCH(
            TRUE(),
            ZScore > 2, "âš ï¸ Anomalie haute (> +2Ïƒ)",
            ZScore < -2, "âš ï¸ Anomalie basse (< -2Ïƒ)",
            "âœ… Normal"
        )
```

**RÃ©sultat** :

```
Month      | Sales     | MA 3M    | Z-Score | Anomaly
Nov 2013   | $945,234  | $812,456 | +2.3    | âš ï¸ Anomalie haute
Dec 2013   | $1,123,567| $856,789 | +3.1    | âš ï¸ Anomalie haute (fÃªtes)
Jan 2014   | $698,234  | $922,345 | -2.4    | âš ï¸ Anomalie basse (aprÃ¨s fÃªtes)
```

**ðŸ’¡ Insight** : DÃ©cembre = pic normal (fÃªtes), Janvier = creux normal (post-fÃªtes)

---

### ðŸ“Š CONCLUSION DU SCÃ‰NARIO 9

#### Ce que vous avez appris :

âœ… **DATESINPERIOD** : CrÃ©er des fenÃªtres mobiles (90 jours, 3 mois, etc.)  
âœ… **Moyennes mobiles** : Lisser les fluctuations (MA 3M, 6M, 12M)  
âœ… **Moyenne pondÃ©rÃ©e** : Donner plus d'importance aux donnÃ©es rÃ©centes  
âœ… **DÃ©tection de tendances** : Identifier hausses/baisses  
âœ… **Anomalies** : DÃ©tecter les valeurs inhabituelles (Z-Score)  
âœ… **Graphiques multi-lignes** : Visualiser tendances Ã  diffÃ©rentes Ã©chelles

#### Pattern Analyse de Tendances

```
1. CrÃ©er mesures de pÃ©riode mobile (3M, 6M, 12M)
2. Calculer moyennes mobiles
3. Comparer pÃ©riode actuelle vs moyenne
4. DÃ©tecter tendances (hausse/baisse)
5. Identifier anomalies (Z-Score)
6. Visualiser avec graphiques multi-Ã©chelles
```

#### Quand utiliser les moyennes mobiles ?

| Situation                    | MA recommandÃ©e | Raison                         |
| ---------------------------- | -------------- | ------------------------------ |
| DonnÃ©es trÃ¨s volatiles       | MA 12M         | Lisser fortement               |
| Tendances moyen terme        | MA 3M ou 6M    | Ã‰quilibre rÃ©activitÃ©/stabilitÃ© |
| DÃ©tection rapide changements | WMA            | RÃ©agit vite aux Ã©volutions     |
| Comparaisons saisonniÃ¨res    | MA 12M         | Ã‰limine saisonnalitÃ©           |

#### Messages pour David

ðŸ“Š **VolatilitÃ© mensuelle** : Â±15% d'un mois Ã  l'autre  
ðŸ“ˆ **Tendance MA 3M** : +2.5% (positive mais modÃ©rÃ©e)  
ðŸ“‰ **Tendance MA 12M** : +1.2% (croissance faible long terme)  
âš ï¸ **Anomalies** : DÃ©cembre et Janvier (saisonnalitÃ© normale)  
âœ… **Recommandation** : Focus sur amÃ©lioration tendance long terme

---

### ðŸ“‹ RÃ‰CAPITULATIF BLOC 3 : Time Intelligence

#### Fonctions maÃ®trisÃ©es :

| Famille               | Fonctions                                   | Usage                    |
| --------------------- | ------------------------------------------- | ------------------------ |
| **Cumuls**            | TOTALYTD, TOTALQTD, TOTALMTD                | Depuis dÃ©but de pÃ©riode  |
| **PrÃ©cÃ©dent/Suivant** | PREVIOUSMONTH, PREVIOUSQUARTER, NEXTMONTH   | PÃ©riode adjacente        |
| **DÃ©calage**          | SAMEPERIODLASTYEAR, DATEADD, PARALLELPERIOD | Comparaisons temporelles |
| **PÃ©riodes**          | DATESINPERIOD, DATESBETWEEN, DATESYTD       | FenÃªtres personnalisÃ©es  |

#### Patterns appris :

1. **Dashboard temporel** : MTD, QTD, YTD avec comparaisons
2. **Analyse vs objectifs** : YTD vs target, projections, run rate
3. **Tendances lissÃ©es** : Moyennes mobiles, dÃ©tection anomalies
4. **Indicateurs visuels** : RAG status, flÃ¨ches, alertes

#### ScÃ©narios complets :

âœ… **ScÃ©nario 7** : Dashboard comparatif (MoM, YoY, QoQ)  
âœ… **ScÃ©nario 8** : Objectifs et projections (YTD vs target)  
âœ… **ScÃ©nario 9** : Moyennes mobiles et tendances


